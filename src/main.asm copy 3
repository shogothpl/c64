.const SCREEN = $0400

.macro push_all() {
pha 
tya
pha
txa
pha
}

.macro pop_all() {
    pla
    txa
    pla
    tay
    pla
}
BasicUpstart2(main)
* = $01000

main:
lda #1
ldx #2
ldy #3
jsr cls
sta SCREEN
stx SCREEN +1
sty SCREEN +2
rts

cls:
push_all()
lda #32
ldx #1
ldy #66

cls_loop:
sta SCREEN, X
sta SCREEN + $0100, X
sta SCREEN + $0200, X
sta SCREEN + $02e8, X
dex
bne cls_loop

pop_all();
rts
